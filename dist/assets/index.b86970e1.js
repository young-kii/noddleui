import{S as U}from"./index.module.864a828f.js";import{C as G,j as t,r as a,a as u,c as z,b as F}from"./index.a45ea5cd.js";import{c as T,b as K,s as O,g as V,d as Y,e as $}from"./netease-music.daaba80e.js";import{B as h}from"./index.c78fdff7.js";import{S as H,T as L}from"./common.be625b9d.js";const S=y=>{const{children:m}=y,f=G.mClassNames.bind(U)({container:!0});return t("div",{className:f,children:m})},q="_show_1nbtf_1",J="_content_1nbtf_50",Q="_song_1nbtf_61",W="_coverImg_1nbtf_72",X="_right_1nbtf_81",Z="_name_1nbtf_88",ee="_bottom_1nbtf_92",te="_lyric_1nbtf_99",o={"noddle-configPanel":"_noddle-configPanel_1nbtf_12",show:q,content:J,song:Q,coverImg:W,right:X,name:Z,bottom:ee,lyric:te},ge=()=>{const[y,m]=a.exports.useState("");a.exports.useState("");const[b,f]=a.exports.useState(""),v=a.exports.useRef("");a.exports.useState(0);const g=a.exports.useRef(""),[B,x]=a.exports.useState("\u6B4C\u8BCD"),[s,w]=a.exports.useState([]),[ae,k]=a.exports.useState({}),[C,D]=a.exports.useState(""),[M,N]=a.exports.useState({}),[E,R]=a.exports.useState([]),I=e=>{var c,l,d,i;return e&&Object.keys(e).length!==0?u("div",{className:o.song,onClick:async()=>{D(e.id),console.log(e,111);const r=await T(e.id,!0);if(f(r.data.data.responseData.mvId),console.log(r.data.data.responseData,222),N(r.data.data.responseData),e!=null&&e.playUrl){const p=_=>{for(let n=0;n<s.length;n++)if(n+1===s.length&&_.currentTarget.currentTime>30){g.current!==s[n].lyric&&setTimeout(()=>{g.current=s[n].lyric,x(s[n].lyric)},1);break}else if(_.currentTarget.currentTime*1e3>s[n].time&&_.currentTarget.currentTime*1e3<s[n+1].time){g.current!==s[n].lyric&&setTimeout(()=>{g.current=s[n].lyric,x(s[n].lyric)},1);break}},j=document.getElementById("audio"),A=z(document.createElement("audio")),P=F.createPortal(t("audio",{src:e==null?void 0:e.playUrl,onTimeUpdate:p,controls:!0,autoPlay:!0}),j);A.render(P)}},children:[t("img",{className:o.coverImg,src:e.coverImgUrl,alt:""}),u("div",{className:o.right,children:[t("div",{className:o.name,children:e.name}),u("div",{className:o.bottom,children:[t(L,{bolder:!0,fontSize:12,type:"danger",children:e.vipFlag?"VIP":""}),t(L,{bolder:!0,fontSize:12,type:"danger",children:(l=(c=K[e.maxBrLevel])==null?void 0:c.tag)!=null?l:e.maxBrLevel}),t("div",{className:o.artists,children:e.artists.map(r=>r.name).join("/")}),t("div",{style:{padding:"0 2px",display:"flex",alignItems:"center"},children:"-"}),t("div",{className:o.albumName,title:(d=e==null?void 0:e.album)==null?void 0:d.name,children:((i=e==null?void 0:e.album)==null?void 0:i.name)||e.albumName})]})]})]},e.id):null};return u("div",{style:{padding:20},children:[u(H,{children:[t("input",{placeholder:"\u5173\u952E\u8BCD",onChange:e=>m(e.target.value)}),t(h,{onClick:async()=>{const e=await O(y);let c=[];for(let d of e.data.data.responseData.records)c.push(d.id);const l=await V(c);console.log(l.data.data.responseData),R(l.data.data.responseData)},children:"\u641C\u7D22"}),t("input",{placeholder:"\u6B4C\u66F2id",onChange:e=>D(e.target.value)}),t(h,{onClick:async()=>{const e=await T(C,!0);console.log(e.data.data.responseData),N(e.data.data.responseData)},children:"\u8BE6\u60C5"}),t(h,{onClick:async()=>{const e=await Y(C);console.log(e),k(e.data.data.responseData),v.current=e.data.data.responseData.lyric;const c=v.current.replaceAll(`
`," "),l=/[^\[](?<min>.*?):(?<second>.*?)](?<text>.*?)(\s\[|$)/g,d=c.matchAll(l);let i=[];for(let r of d){let p=Math.floor((Number(r.groups.min)*60+Number(r.groups.second))*1e3);!isNaN(p)&&r.groups.text&&i.push({time:p,lyric:r.groups.text})}console.log(v.current),w(i),console.log(i),console.log(e)},children:"\u641C\u7D22\u6B4C\u8BCD"}),t(h,{onClick:async()=>{const e=await $(b);console.log(e)},children:"\u641C\u7D22MV"})]}),t("div",{style:{height:300,padding:20},children:t(S,{children:E.map(e=>I(e))})}),t("div",{style:{height:100,padding:20},children:t(S,{children:I(M)})}),t("div",{id:"audio",style:{padding:20}}),t("div",{style:{minHeight:120,padding:20},children:t(S,{children:t("div",{className:o.lyric,children:B})})}),t("input",{className:o.rangeInput,type:"range",onChange:e=>console.log(e.target.value)})]})};export{ge as default};

import{R as M,j as r,C as H,r as c,a as g,F as C}from"./index.a45ea5cd.js";import{A as O}from"./index.0e621c39.js";import{g as U,i as V,j,n as z,S as G,T as J}from"./common.be625b9d.js";import{D as Q}from"./index.3bd378e2.js";import{B as N}from"./index.c78fdff7.js";import"./index.module.cbc1b72d.js";import"./index.module.864a828f.js";import"./index.24aa3a9d.js";import"./index.5b7699ce.js";import"./index.f4845f6e.js";import"./index.3fc80f46.js";import{S as Z}from"./index.162e0795.js";import"./index.module.a9114f5c.js";import"./index.module.537b585f.js";import"./index.5c7062a6.js";const ee="_show_ervq3_1",te="_content_ervq3_50",se="_centered_ervq3_68",re="_header_ervq3_71",ne="_tabs_ervq3_80",le="_add_ervq3_85",ce="_slider_ervq3_92",oe="_tab_ervq3_80",ae="_card_ervq3_135",de="_outlined_ervq3_186",ie="_inputContainer_ervq3_190",ue="_inputEditor_ervq3_190",he="_hiddenLabel_ervq3_199",T={"noddle-configPanel":"_noddle-configPanel_ervq3_12",show:ee,content:te,default:"_default_ervq3_61",centered:se,header:re,tabs:ne,add:le,slider:ce,tab:oe,card:ae,outlined:de,inputContainer:ie,inputEditor:ue,hiddenLabel:he},S="default_KEY_@&^",X=M.forwardRef((p,d)=>{const{type:i}=p,y=()=>i?U(i,V,"default"):"default",l={default:r(pe,{...p}),card:r(fe,{...p})},t=H.mClassNames.bind(T)({[`${y()}`]:!0});return r("div",{className:t,ref:d,children:l[y()]})}),fe=p=>{const{items:d,currentTab:i,outlined:y,onEdit:l,showAdd:o}=p,[t,_]=c.exports.useState(d||[]),b=H.mClassNames.bind(T),x=c.exports.useRef("");c.exports.useRef(0);const f=c.exports.useRef(),[k,w]=c.exports.useState(S),[v,a]=c.exports.useState(S);let m=null;const q=b({header:!0}),L=b({tab:!0}),D=b({tab:!0,add:!0}),K=b({content:!0,outlined:y}),W=(e,n,h)=>{k===n&&h?a(n):I(n),setTimeout(()=>f.current.scrollTo({left:e.target.offsetLeft,behavior:"smooth"}),0)},I=e=>{w(e)},F=()=>{const e=[...t];l==null||l((n,h)=>{e.push(n),w(n.key),h==null||h(e,t)},function(){},function(){}),_(e),setTimeout(()=>f.current.scrollTo({left:f.current.scrollWidth-f.current.offsetWidth,behavior:"smooth"}),0)},s=e=>{let n=0;const h=t.filter((E,R,B)=>(E.key===e&&(n=R===B.length-1?R-1:R),E.key!==e));e===k&&w(h[n].key),_(h),l==null||l(function(){},E=>{E(e,h,t)},function(){})},u=(e,n)=>{const h=t.map(E=>E.key===e?{...E,label:n}:E);_(h)},A=e=>{l==null||l(function(){},function(){},n=>{n(e)})},P=e=>v===e.key?r(be,{setEditingKey:a,label:e.label,edit:n=>u(e.key,n),editFinished:A}):e.closable?g(C,{children:[e.label,r(Q,{customHover:!0,style:{marginLeft:8},height:12,width:12,color:k===e.key?z:"black",onClick:n=>{n.stopPropagation(),s(e.key)}})]}):e.label;c.exports.useEffect(()=>{m=f.current;const e=n=>{const h=-(n.wheelDeltaX+n.wheelDeltaY)*.4;f.current.scrollTo({left:f.current.scrollLeft+h}),n.preventDefault()};return m.addEventListener("wheel",e,{passive:!1}),()=>{m==null||m.removeEventListener("wheel",e)}},[]);const Y=()=>g("div",{className:q,ref:f,children:[t==null?void 0:t.map(e=>r("div",{className:L,"data-tabsid":x.current,onClick:n=>W(n,e.key,e.editable),"data-active":k===e.key,children:P(e)},e.key)),o&&r("div",{className:D,onClick:F,children:r(O,{height:14,width:14})})]});c.exports.useEffect(()=>{var e;x.current=j(),w(i||((e=t[0])==null?void 0:e.key))},[]);const $=()=>r("div",{className:K,children:t==null?void 0:t.map(e=>r("div",{style:{display:e.key===k?"block":"none"},children:e.children},e.key))});return g(C,{children:[Y(),$()]})},pe=p=>{const{items:d,currentTab:i,outlined:y,centered:l}=p,o=H.mClassNames.bind(T),[t,_]=c.exports.useState(S),b=c.exports.useRef(""),[x,f]=c.exports.useState(0),[k,w]=c.exports.useState(0),v=c.exports.useRef();let a=null;const m={transform:`translateX(${x}px)`,width:k},q=o({header:!0,centered:l}),L=o({tab:!0}),D=o({content:!0,outlined:y}),K=(s,u)=>{W(u),setTimeout(()=>v.current.scrollTo({left:s.target.offsetLeft,behavior:"smooth"}),0)},W=s=>{_(s)};c.exports.useEffect(()=>{var s;b.current=j(),_(i||((s=d[0])==null?void 0:s.key))},[]),c.exports.useEffect(()=>{const s=document.querySelectorAll(`[data-tabsid=${b.current}]`);if(s&&s.length!==0)for(let u of s)u.dataset.active==="true"&&(w(u.offsetWidth),f(u.offsetLeft))},[t]);const I=()=>r("div",{className:q,ref:v,children:g("div",{className:T.tabs,children:[d==null?void 0:d.map(s=>r("div",{className:L,"data-tabsid":b.current,onClick:u=>{!s.disabled&&K(u,s.key)},"data-disabled":s.disabled,"data-active":t===s.key,children:s.label},s.key)),r("div",{className:T.slider,style:m})]})}),F=()=>r("div",{className:D,children:d==null?void 0:d.map(s=>r("div",{style:{display:s.key===t?"block":"none"},children:s.children},s.key))});return c.exports.useEffect(()=>{a=v.current;const s=u=>{const A=-(u.wheelDeltaX+u.wheelDeltaY)*.4;v.current.scrollTo({left:v.current.scrollLeft+A}),u.preventDefault()};return a.addEventListener("wheel",s,{passive:!1}),()=>{a==null||a.removeEventListener("wheel",s)}},[]),g(C,{children:[I(),F()]})},be=p=>{var v;const{setEditingKey:d,label:i,edit:y,editFinished:l}=p,o=c.exports.useRef(),t=c.exports.useRef(),[_,b]=c.exports.useState(((v=t==null?void 0:t.current)==null?void 0:v.offsetWidth)||0),x=()=>{d(S),l==null||l(i)},f={width:_},k=a=>{var m;y(a.target.value),b(((m=t==null?void 0:t.current)==null?void 0:m.offsetWidth)+4)},w=a=>{a.key==="Enter"&&x()};return c.exports.useEffect(()=>{var a;o.current.focus(),b(((a=t==null?void 0:t.current)==null?void 0:a.offsetWidth)+4)},[]),g("div",{className:T.inputContainer,children:[r("input",{ref:o,style:f,onChange:k,className:T.inputEditor,onBlur:x,onKeyUp:w,value:i}),r("span",{ref:t,className:T.hiddenLabel,children:i})]})},De=()=>{const p=c.exports.useRef(0);return g(C,{children:[g("div",{style:{minHeight:400,width:"100%",padding:24},children:["tabs",r(X,{showAdd:!0,onEdit:(i,y,l)=>{i==null||i({label:"\u65B0\u7684\u6807\u7B7E",key:`newTab${p.current++}`,children:g(C,{children:[r(J,{children:"OKOK"})," ",r(Z,{})]}),editable:!0,closable:!0},(o,t)=>{console.log(o,t)}),y((o,t,_)=>{console.log(o),console.log(t),console.log(_)}),l==null||l(o=>console.log(o))},type:"card",outlined:!0,items:[{children:"hild 1child 1child 1child 1child 1child 1child 1child 1child 1child 1",closable:!0,key:1,label:"Tab 1"},{children:g(G,{direction:"vertical",children:[r(N,{children:"\u6253\u5F00"}),r(N,{children:"\u6253\u5F00"}),r(N,{children:"\u6253\u5F00"}),r(N,{children:"\u6253\u5F00"})]}),closable:!1,key:2,label:"Tab 2"},{children:"child 3",closable:!1,key:3,label:"Tab 3"}]})]}),r("div",{style:{minHeight:400,width:"100%",padding:24},children:r(X,{items:[{children:"child 1",key:0,label:"tab 1"},{children:"child 1",key:1,label:"\u8FD9\u662F\u4E00\u4E2A",disabled:!0},{children:"child 1",key:2,label:"\u4E00\u4E2A\u4E00\u4E2A\u4E00\u4E2ATAB"},{children:"child 3",key:3,label:"tab 36"},{children:"child 1",key:4,label:"tab 1"},{children:"child 1",key:5,label:"tab 1"}]})})]})};export{De as default};
